// ========================================
// B - STUDY LANGUAGE SYSTEM
// ========================================
// Handles Arabic and English language switching
// Default language: Arabic (ar)

class LanguageManager {
    constructor() {
        this.currentLanguage = localStorage.getItem('language') || 'ar';
        this.translations = {
            ar: {
                // Header & Navigation
                'nav-home': 'ุงูุฑุฆูุณูุฉ',
                'nav-my-courses': 'ููุฑุณุงุชู',
                'nav-q-bank': 'ุจูู ุงูุงุณุฆูุฉ',
                'nav-all-courses': 'ูู ุงูููุฑุณุงุช',
                'nav-reviews': 'ุงููุฑุงุฌุนุงุช',
                'nav-help': 'ูุณุงุนุฏุฉ',
                'nav-privacy': 'ุณูุงุณุฉ ุงูุฎุตูุตูุฉ',
                'nav-settings': 'ุงูุงุนุฏุงุฏุงุช',
                'nav-logout': 'ุฎุฑูุฌ',
                
                // Landing Page
                'hero-title': 'ุงูุช ูุณุชุนุฏ ุฏูููุชูุ',
                'hero-subtitle': 'ุฃุจุฏุฃ ุฑุญูุฉ ุงูุชุนูู ููุง ูุณุชูู ุงูู !',
                'hero-description': 'B - Study ูู ููุตุฉ ุชุนููููุฉ ุชูุฏู ุงูู ุชุณููู ุนูููุฉ ุงูุชุนูู ุนู ุจุนุฏ ููุทูุงุจ ูุงููุนูููู',
                'signup-btn': 'ุนูู ุญุณุงุจ ุฌุฏูุฏ',
                'login-btn': 'ูุฏู ุญุณุงุจ ุจุงููุนู',
                'download-app-title': 'ุญูู ุงูุชุทุจูู ูุฑูุจูุง',
                'latest-courses': 'ุฃุญุฏุซ ุงูููุฑุณุงุช',
                'loading-courses': 'ุฌุงุฑู ุชุญููู ุงูููุฑุณุงุช...',
                'no-courses-title': 'ูุง ุชูุฌุฏ ููุฑุณุงุช ูุชุงุญุฉ',
                'no-courses-desc': 'ุฌุงุฑู ุงูุนูู ุนูู ุฅุถุงูุฉ ููุฑุณุงุช ุฌุฏูุฏุฉ',
                
                // Course Filters
                'filter-1st-secondary': '1ุซ',
                'filter-2nd-secondary': '2ุซ',
                'filter-3rd-secondary': '3ุซ',
                'filter-1st-college': '1 ูููุฉ',
                
                // About Section
                'about-title': 'ุงุณุชูุดู ุนุงูู ุงูุชุนูู ูุน B - Study ุงูุชุนููููุฉ ูุชุญ ุฃููู ุงูุชุนูููู ูุชุญููู ุฃูุฏุงูู ูุนูุง.',
                'about-description': 'ูุฑุญุจูุง ุจู ูู ููุตุชูุง ุงูุชุนููููุฉ ุงููุจุชูุฑุฉ ุญูุซ ูุชูุงูู ุงูุชุนูู ุงูุดูู ุจุงูุชูููููุฌูุง ุงูุญุฏูุซุฉ. ูุญู ูุคูู ุจููุฉ ุงูุชุนููู ูู ุชุบููุฑ ุญููุงุช ุงูุฃูุฑุงุฏุ ูููุฏู ูู ูุฑุตุฉ ูุฑูุฏุฉ ูุงูุชุณุงุจ ุงูููุงุฑุงุช ูุงููุนุฑูุฉ ุจุทุฑููุฉ ููููุฉ ููุญูุฒุฉ.',
                'features-title': 'ูููุฒุงุช ุงูููุตุฉ',
                'feature-1': '๐ ูุญุชูู ุชุนูููู ูุชููุน: ุฏูุฑุงุช ูุตููุฉ ุจุนูุงูุฉ ุชุบุทู ูุฌููุนุฉ ูุงุณุนุฉ ูู ุงูููุงุฏ.',
                'feature-2': '๐ ุชุนูู ุชูุงุนูู: ุงุฎุชุจุฑ ุงููุญุชูู ูู ุฎูุงู ุฃูุดุทุฉ ุชุนููููุฉ ูุดููุฉ ููุญุงูุงุฉ ูุงูุนูุฉ.',
                'feature-3': '๐ ุชูููู ูุณุชูุฑ: ุชุชุจุน ุชูุฏูู ูุงุญุตู ุนูู ุชููููุงุช ุฏูุฑูุฉ ูุชุนุฒูุฒ ุชุฌุฑุจุชู ุงูุชุนููููุฉ.',
                'feature-4': '๐ ุชูุงุตู ูุดุงุฑู: ุงูุถู ุฅูู ูุฌุชูุนูุง ุงูุชุนูููู ูุชูุงุนู ูุน ูุชุนูููู ุขุฎุฑูู ููุฏุฑุณูู ูุชููุฒูู.',
                'feature-5': '๐ ุฏูุฑุงุช ูุฌุงููุฉ: ุงุณุชูุชุน ุจูุฑุตุฉ ุงููุตูู ุฅูู ูุญุชูู ูุฌุงูู ูุชุฌุฑุจุฉ ููููุณุฉ ููุง ููุฏูู.',
                
                // CTA Section
                'cta-description': 'ุงูุชุดู ุนุงูู ุงูุชุนูู ุงูุฌุฏูุฏ ูุงุจุฏุฃ ุฑุญูุชู ุงูุชุนููููุฉ ุงูููู. ุณุฌู ุงูุขู ูููุตูู ุฅูู ุงููุญุชูู ุงูุญุตุฑู ูุงูุชูุงุนู ูุน ูุฌุชูุนูุง ุงูุชุนูููู ุงููููุฒ.',
                'cta-button': 'ุณุฌู ุงูุขู',
                'cta-motivation': 'ุฅูู ุงููู ุจุชุณุชููุ ุฅุจุฏุฃ ูุนุงูุง ุงูููุงุฑุฏุฉ ูุฅุจุฏุฃ ุฑุญูุชู ูุญู ุงูุชุนูู ูุงูุชุฃูู!',
                
                // Footer
                'footer-tagline': 'ุงุชุนูู ุจูู ูุชุนุฉ ูุณูููุฉ ูุน B - Study',
                'footer-description': 'ุฃููุงู ุจูู ูู ููุตุชูุง ุงูุชุนููููุฉ ุงูุฌุฏูุฏุฉุ ุญูุซ ุงูุชุนูู ุจูุจูู ุฃุญูู ุจุชูููุงุช ุฌุฏูุฏุฉ. ุงุญูุง ุจูุคูู ุฅู ุงูุชุนููู ุจูุบูุฑ ุญูุงุฉ ุงููุงุณุ ูุจููุฏููู ูุฑุตุฉ ูุฑูุฏุฉ ุฅูู ุชูุชุณุจ ููุงุฑุงุช ููุนุฑูุฉ ุจุดูู ูููู ููุญูุฒ.',
                'footer-download-title': 'ุญูู ุงูุชุทุจูู ุฏูููุชู',
                'developer-credit': 'Developed By B-Study Technical Team',
                
                // Dashboard
                'welcome-morning': 'ุตุจุงุญ ุงูุฎูุฑ',
                'welcome-evening': 'ูุณุงุก ุงูุฎูุฑ',
                'welcome-afternoon': 'ูุณุงุก ุงูุฎูุฑ',
                'dashboard-title': 'ุงูุฑุฆูุณูุฉ',
                'my-courses': 'ููุฑุณุงุชู',
                'all-courses': 'ูู ุงูููุฑุณุงุช',
                'q-bank': 'ุจูู ุงูุงุณุฆูุฉ',
                'reviews': 'ุงููุฑุงุฌุนุงุช',
                'help': 'ูุณุงุนุฏุฉ',
                'settings': 'ุงูุงุนุฏุงุฏุงุช',
                'logout': 'ุฎุฑูุฌ',
                
                // Course Related
                'course-duration': 'ุณุงุนุฉ',
                'lecture-count': 'ูุญุงุถุฑุฉ',
                'exam-count': 'ุฃูุชุญุงูุงุช',
                'course-title': 'ุงูุดูุฑ ุงูุงูู | ุงูุตู ุงูุงูู ุงูุซุงููู',
                'course-description': 'ูุญุชูู ุนูู ุดุฑุญ ุงูุดูุฑ ุงูุงูู ูู ุงูุตู ุงูุงูู ุงูุซุงููู',
                'buy-now': 'ุดุฑุงุก ุงูุงู',
                'continue-learning': 'ุฃููู ุงูุชุนูู ุงูุงู',
                'course-price': 'ุฌููู',
                
                // Exam Related
                'exam-title': 'ุงูุงูุชุญุงู ุนูู ุงูุฏุฑุณ',
                'question-count': 'ุณุคุงู',
                'mcq-count': 'ุงุฎุชุฑ',
                'tf-count': 'ุตุญ ูุฎุทุฃ',
                'essay-count': 'ููุงูู',
                'duration': 'ุฏูููุฉ',
                'start-exam': 'ุฃุจุฏุฃ ุงูุงูุชุญุงู ุงูุงู',
                'lesson-description': 'ูุญุชูู ุนูู ุดุฑุญ ุงูุดูุฑ ุงูุงูู ูู ุงูุตู ุงูุงูู ุงูุซุงููู',
                
                // Common
                'loading': 'ุฌุงุฑู ุงูุชุญููู...',
                'error': 'ุฎุทุฃ',
                'success': 'ูุฌุญ',
                'cancel': 'ุฅูุบุงุก',
                'save': 'ุญูุธ',
                'edit': 'ุชุนุฏูู',
                'delete': 'ุญุฐู',
                'confirm': 'ุชุฃููุฏ',
                'close': 'ุฅุบูุงู',
                'back': 'ุฑุฌูุน',
                'next': 'ุงูุชุงูู',
                'previous': 'ุงูุณุงุจู',
                'submit': 'ุฅุฑุณุงู',
                'search': 'ุจุญุซ',
                'filter': 'ุชุตููุฉ',
                'sort': 'ุชุฑุชูุจ',
                'view': 'ุนุฑุถ',
                'download': 'ุชุญููู',
                'upload': 'ุฑูุน',
                'share': 'ูุดุงุฑูุฉ',
                'like': 'ุฅุนุฌุงุจ',
                'comment': 'ุชุนููู',
                'follow': 'ูุชุงุจุนุฉ',
                'unfollow': 'ุฅูุบุงุก ุงููุชุงุจุนุฉ',
                'profile': 'ุงูููู ุงูุดุฎุตู',
                'account': 'ุงูุญุณุงุจ',
                'notifications': 'ุงูุฅุดุนุงุฑุงุช',
                'messages': 'ุงูุฑุณุงุฆู',
                'inbox': 'ุตูุฏูู ุงููุงุฑุฏ',
                'sent': 'ุงููุฑุณู',
                'draft': 'ุงููุณูุฏุฉ',
                'trash': 'ุงููุญุฐููุงุช',
                'archive': 'ุงูุฃุฑุดูู',
                'favorites': 'ุงูููุถูุฉ',
                'bookmarks': 'ุงูุฅุดุงุฑุงุช ุงููุฑุฌุนูุฉ',
                'history': 'ุงูุณุฌู',
                'recent': 'ุงูุฃุฎูุฑุฉ',
                'popular': 'ุงูุดุงุฆุนุฉ',
                'trending': 'ุงูุฑุงุฆุฌุฉ',
                'new': 'ุฌุฏูุฏ',
                'hot': 'ุณุงุฎู',
                'featured': 'ูููุฒ',
                'premium': 'ูููุฒ',
                'free': 'ูุฌุงูู',
                'paid': 'ูุฏููุน',
                'trial': 'ุชุฌุฑูุจู',
                'demo': 'ุชุฌุฑูุจู',
                'beta': 'ุชุฌุฑูุจู',
                'alpha': 'ุชุฌุฑูุจู',
                'stable': 'ูุณุชูุฑ',
                'latest': 'ุงูุฃุญุฏุซ',
                'oldest': 'ุงูุฃูุฏู',
                'best': 'ุงูุฃูุถู',
                'worst': 'ุงูุฃุณูุฃ',
                'highest': 'ุงูุฃุนูู',
                'lowest': 'ุงูุฃุฏูู',
                'most': 'ุงูุฃูุซุฑ',
                'least': 'ุงูุฃูู',
                'all': 'ุงููู',
                'none': 'ูุง ุดูุก',
                'some': 'ุจุนุถ',
                'many': 'ูุซูุฑ',
                'few': 'ูููู',
                'several': 'ุนุฏุฉ',
                'multiple': 'ูุชุนุฏุฏ',
                'single': 'ูุงุญุฏ',
                'double': 'ูุฒุฏูุฌ',
                'triple': 'ุซูุงุซู',
                'quadruple': 'ุฑุจุงุนู',
                'quintuple': 'ุฎูุงุณู',
                'sextuple': 'ุณุฏุงุณู',
                'septuple': 'ุณุจุงุนู',
                'octuple': 'ุซูุงูู',
                'nonuple': 'ุชุณุงุนู',
                'decuple': 'ุนุดุงุฑู'
            },
            en: {
                // Header & Navigation
                'nav-home': 'Home',
                'nav-my-courses': 'My Courses',
                'nav-q-bank': 'Question Bank',
                'nav-all-courses': 'All Courses',
                'nav-reviews': 'Reviews',
                'nav-help': 'Help',
                'nav-privacy': 'Privacy Policy',
                'nav-settings': 'Settings',
                'nav-logout': 'Logout',
                
                // Landing Page
                'hero-title': 'Are you ready now?',
                'hero-subtitle': 'Start your learning journey, what are you waiting for!',
                'hero-description': 'B - Study is an educational platform aimed at facilitating distance learning for students and teachers',
                'signup-btn': 'Create New Account',
                'login-btn': 'I Already Have an Account',
                'download-app-title': 'Download the App Soon',
                'latest-courses': 'Latest Courses',
                'loading-courses': 'Loading courses...',
                'no-courses-title': 'No courses available',
                'no-courses-desc': 'We are working on adding new courses',
                
                // Course Filters
                'filter-1st-secondary': '1st Sec',
                'filter-2nd-secondary': '2nd Sec',
                'filter-3rd-secondary': '3rd Sec',
                'filter-1st-college': '1st College',
                
                // About Section
                'about-title': 'Explore the world of learning with B - Study Educational Platform. Open your educational horizons and achieve your goals with us.',
                'about-description': 'Welcome to our innovative educational platform where exciting learning meets modern technology. We believe in the power of education to change individuals\' lives, and we offer you a unique opportunity to acquire skills and knowledge in an inspiring and motivating way.',
                'features-title': 'Platform Features',
                'feature-1': '๐ Diverse Educational Content: Carefully designed courses covering a wide range of subjects.',
                'feature-2': '๐ Interactive Learning: Test content through exciting educational activities and realistic simulations.',
                'feature-3': '๐ Continuous Assessment: Track your progress and get periodic evaluations to enhance your educational experience.',
                'feature-4': '๐ Connect and Share: Join our educational community and interact with other learners and distinguished teachers.',
                'feature-5': '๐ Free Courses: Enjoy the opportunity to access free content for a tangible experience of what we offer.',
                
                // CTA Section
                'cta-description': 'Discover the new world of learning and start your educational journey today. Register now to access exclusive content and interact with our distinguished educational community.',
                'cta-button': 'Register Now',
                'cta-motivation': 'What are you waiting for? Start with us today and begin your journey towards learning and excellence!',
                
                // Footer
                'footer-tagline': 'Learn with fun and ease with B - Study',
                'footer-description': 'Welcome to our new educational platform, where learning becomes more enjoyable with new technologies. We believe that education changes people\'s lives, and we offer you a unique opportunity to acquire skills and knowledge in an inspiring and motivating way.',
                'footer-download-title': 'Download the App Now',
                'developer-credit': 'Developed By B-Study Technical Team',
                
                // Dashboard
                'welcome-morning': 'Good Morning',
                'welcome-evening': 'Good Evening',
                'welcome-afternoon': 'Good Afternoon',
                'dashboard-title': 'Dashboard',
                'my-courses': 'My Courses',
                'all-courses': 'All Courses',
                'q-bank': 'Question Bank',
                'reviews': 'Reviews',
                'help': 'Help',
                'settings': 'Settings',
                'logout': 'Logout',
                
                // Course Related
                'course-duration': 'hours',
                'lecture-count': 'lectures',
                'exam-count': 'exams',
                'course-title': 'First Month | First Secondary',
                'course-description': 'Contains explanation of the first month in first secondary',
                'buy-now': 'Buy Now',
                'continue-learning': 'Continue Learning',
                'course-price': 'EGP',
                
                // Exam Related
                'exam-title': 'Exam on the Lesson',
                'question-count': 'questions',
                'mcq-count': 'MCQ',
                'tf-count': 'True/False',
                'essay-count': 'Essay',
                'duration': 'minutes',
                'start-exam': 'Start Exam Now',
                'lesson-description': 'Contains explanation of the first month in first secondary',
                
                // Common
                'loading': 'Loading...',
                'error': 'Error',
                'success': 'Success',
                'cancel': 'Cancel',
                'save': 'Save',
                'edit': 'Edit',
                'delete': 'Delete',
                'confirm': 'Confirm',
                'close': 'Close',
                'back': 'Back',
                'next': 'Next',
                'previous': 'Previous',
                'submit': 'Submit',
                'search': 'Search',
                'filter': 'Filter',
                'sort': 'Sort',
                'view': 'View',
                'download': 'Download',
                'upload': 'Upload',
                'share': 'Share',
                'like': 'Like',
                'comment': 'Comment',
                'follow': 'Follow',
                'unfollow': 'Unfollow',
                'profile': 'Profile',
                'account': 'Account',
                'notifications': 'Notifications',
                'messages': 'Messages',
                'inbox': 'Inbox',
                'sent': 'Sent',
                'draft': 'Draft',
                'trash': 'Trash',
                'archive': 'Archive',
                'favorites': 'Favorites',
                'bookmarks': 'Bookmarks',
                'history': 'History',
                'recent': 'Recent',
                'popular': 'Popular',
                'trending': 'Trending',
                'new': 'New',
                'hot': 'Hot',
                'featured': 'Featured',
                'premium': 'Premium',
                'free': 'Free',
                'paid': 'Paid',
                'trial': 'Trial',
                'demo': 'Demo',
                'beta': 'Beta',
                'alpha': 'Alpha',
                'stable': 'Stable',
                'latest': 'Latest',
                'oldest': 'Oldest',
                'best': 'Best',
                'worst': 'Worst',
                'highest': 'Highest',
                'lowest': 'Lowest',
                'most': 'Most',
                'least': 'Least',
                'all': 'All',
                'none': 'None',
                'some': 'Some',
                'many': 'Many',
                'few': 'Few',
                'several': 'Several',
                'multiple': 'Multiple',
                'single': 'Single',
                'double': 'Double',
                'triple': 'Triple',
                'quadruple': 'Quadruple',
                'quintuple': 'Quintuple',
                'sextuple': 'Sextuple',
                'septuple': 'Septuple',
                'octuple': 'Octuple',
                'nonuple': 'Nonuple',
                'decuple': 'Decuple'
            }
        };
        
        this.init();
    }
    
    init() {
        this.setLanguage(this.currentLanguage);
        this.createLanguageSwitcher();
        this.translatePage();
    }
    
    setLanguage(lang) {
        this.currentLanguage = lang;
        localStorage.setItem('language', lang);
        
        // Update HTML lang attribute and direction
        document.documentElement.lang = lang;
        document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
        document.body.dir = lang === 'ar' ? 'rtl' : 'ltr';
        
        // Add/remove RTL class for CSS
        if (lang === 'ar') {
            document.body.classList.add('rtl');
            document.body.classList.remove('ltr');
        } else {
            document.body.classList.add('ltr');
            document.body.classList.remove('rtl');
        }
    }
    
    getText(key) {
        return this.translations[this.currentLanguage][key] || key;
    }
    
    translatePage() {
        // Find all elements with data-i18n attribute
        const elements = document.querySelectorAll('[data-i18n]');
        elements.forEach(element => {
            const key = element.getAttribute('data-i18n');
            const translation = this.getText(key);
            
            if (element.tagName === 'INPUT' && element.type === 'placeholder') {
                element.placeholder = translation;
            } else if (element.tagName === 'IMG') {
                element.alt = translation;
            } else {
                element.textContent = translation;
            }
        });
        
        // Update dynamic content
        this.updateDynamicContent();
    }
    
    updateDynamicContent() {
        // Update welcome message based on time
        const welcomeElements = document.querySelectorAll('.welcome');
        welcomeElements.forEach(element => {
            const hour = new Date().getHours();
            let welcomeKey = 'welcome-morning';
            
            if (hour >= 12 && hour < 17) {
                welcomeKey = 'welcome-afternoon';
            } else if (hour >= 17) {
                welcomeKey = 'welcome-evening';
            }
            
            element.textContent = this.getText(welcomeKey);
        });
    }
    
    createLanguageSwitcher() {
        // Check if language switcher already exists
        if (document.querySelector('.language-switcher')) {
            return;
        }
        
        // Create language switcher
        const switcher = document.createElement('div');
        switcher.className = 'language-switcher';
        switcher.innerHTML = `
            <button class="lang-btn ${this.currentLanguage === 'ar' ? 'active' : ''}" data-lang="ar">
                <span>ุงูุนุฑุจูุฉ</span>
            </button>
            <button class="lang-btn ${this.currentLanguage === 'en' ? 'active' : ''}" data-lang="en">
                <span>English</span>
            </button>
        `;
        
        // Add event listeners
        switcher.querySelectorAll('.lang-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const lang = e.target.closest('.lang-btn').dataset.lang;
                this.switchLanguage(lang);
            });
        });
        
        // Insert into header at the beginning (left side)
        const header = document.querySelector('header nav');
        if (header) {
            header.insertBefore(switcher, header.firstChild);
        }
    }
    
    switchLanguage(lang) {
        this.setLanguage(lang);
        this.translatePage();
        
        // Update language switcher buttons
        const buttons = document.querySelectorAll('.lang-btn');
        buttons.forEach(btn => {
            btn.classList.toggle('active', btn.dataset.lang === lang);
        });
        
        // Trigger custom event for other scripts
        document.dispatchEvent(new CustomEvent('languageChanged', { detail: { language: lang } }));
    }
}

// Initialize language manager when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    window.languageManager = new LanguageManager();
});

// Export for use in other scripts
if (typeof module !== 'undefined' && module.exports) {
    module.exports = LanguageManager;
} 